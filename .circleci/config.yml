version: 2.1

orbs:
  singularity: singularity/singularity@1.0.0
  
jobs:
  build:
    steps:
      - run:
          name: install nextflow
          command: curl -s https://get.nextflow.io | bash
            chmod u+x nextflow
  test:
    steps:
      - run:
          name: Test
          command: echo "Test,Test"
          
workflows:
  build-and-deploy:
    jobs:
      - singularity/install_debian_3:
          go-version: 1.11.5
          singularity-version: 3.2.1
      - build:
      - test:
        requires:
          - build
